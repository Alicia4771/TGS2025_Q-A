<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        details {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: .75rem 1rem;
            margin: .5rem 0;
            background: #fafafa;
        }
        summary {
            cursor: pointer;
            font-weight: 600;
            list-style: none; /* Firefox 用 */
        }

        /* 既定の三角マーカーを消して独自のアイコンを付ける */
        summary::-webkit-details-marker { display: none; }
        summary::before {
            content: "▸";
            display: inline-block;
            width: 1em;
            transition: transform .2s;
            margin-right: .25rem;
        }

        details[open] > summary::before {
            transform: rotate(90deg);
        }
        .answer { margin-top: .5rem; line-height: 1.8; }
    </style>
</head>
<body>
    <h1>芋虫ゲームのQ&A</h1>
    <h2>1. ゲームの内容について</h2>
    <details>
        <summary>Q1-1. 難易度選択はどうなってるの？</summary>
            <div class="answer">
                難易度は、「簡単」・「普通」の２段階があります。腹筋ローラーを黄色い葉っぱの線まで伸ばしたあと緑の線まで戻せば「簡単モード」、奥の赤い葉っぱの線まで伸ばしたあと緑の線まで戻せば「普通モード」となります。
            </div>
    </details>
    <details>
        <summary>Q1-2. 1プレイは何分くらい？</summary>
            <div class="answer">
                各難易度ごとに制限時間が設定されていて、「簡単モード」なら80秒、「普通モード」なら120秒です。
            </div>
    </details>
    <details>
        <summary>Q1-3. </summary>
            <div class="answer">
                //
            </div>
    </details>

    <h2>2. ゲーム制作について</h2>
    <details>
        <summary>Q2-1. どんなセンサーを使っているの？</summary>
            <div class="answer">
                schoomyの距離センサーを使っています。これは、超音波を使って距離を測定するセンサーです。センサーから超音波を出し、物体に当たって跳ね返ってくるまでの時間を測定することで距離を計算しています。
            </div>
    </details>
    <details>
        <summary>Q2-2. schoomyのプログラムってどうやるの？</summary>
            <div class="answer">
                schoomyは、Scratchベースのビジュアルプログラミング環境を使ってプログラムを作成します。ブロックを組み合わせてプログラムを作成し、センサーの値を取得したり、Unityにデータを送信したりします。
                <br>
                ※以下の画像は、実際にschoomyでプログラムを作成している様子です。
                <br>
                <img src="schoomy_image.png" alt="schoomyでの作成の様子" title="schoomyでの作成の様子" width="300" height="200">
            </div>
    </details>
    <details>
        <summary>Q2-3. どうやってキャラクターを動かしているの？</summary>
            <div class="answer">
                schoomyの距離センサーからリアルタイムで値を所得してUnityに送っています。Unityでは取得した値を元に、プレイヤーがどの様な操作をしているかを判定して、それに合わせてキャラクターの動きを制御しています。
            </div> 
    </details>
    <details>
        <summary>Q2-4. キャラクターを前進させるのはどうやっているの？</summary>
            <div class="answer">
                腹筋ローラーを前に伸ばすと距離センサーの値が小さくなり、反対に、腹筋ローラーを手前に引くと距離センサーの値が大きくなります。基本的には、距離センサーからの値が小さくなれば腹筋ローラーを前に伸ばしている、距離センサーからの値が大きくなれば腹筋ローラーを手前に引いていると判定されます。しかし、距離センサーの値にはノイズが入りやすいため、距離センサーからの値をそのまま使うとキャラクターが意図しない挙動をすることがあります。そこで、距離センサーからの値を平均的に値を扱うことでノイズの影響を軽減しています。
                <br>
                <details>
                    <summary>具体的に</summary>
                        <div class="answer">
                            過去32回分の距離センサーからの値を、キャラクターを動かすためのスクリプト内で１次元配列として保持しておき、距離センサーから値が送られてくる度に、「横軸がindex番号を逆順から、縦軸が距離センサーからの値」という座標平面を考えここに32個全ての値をプロットしていきます。そして、最新の値（index番号が31番の値）が原点に来るように、全ての値を並行移動させます。次に、これらの値を原点を通る１次式で近似し、その直線の傾きを求めます。その値が正であれば腹筋ローラーを前に伸ばしている、負であれば腹筋ローラーを手前に引いていると判断できます。ただし、傾きの絶対値が一定の値未満の場合は、腹筋ローラーを動かしていないと判断します。
                        </div>
                </details>
            </div>
    </details>
</body>
</html>